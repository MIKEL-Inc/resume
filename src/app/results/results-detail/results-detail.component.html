<div class="container">

  <div class="panel">
    <mat-menu #detailMenu="matMenu" xPosition="before">
      <button mat-menu-item (click)="toggleEditMode()">
        <mat-icon>edit</mat-icon>
        <span>Edit</span>
      </button>
    </mat-menu>

    <button class="panel-menu" mat-icon-button [matMenuTriggerFor]="detailMenu">
      <mat-icon>more_vert</mat-icon>
    </button>

    <section class="details mat-typography" *ngIf="!editMode">
      <mat-card>
        <mat-grid-list cols="2" rowHeight="2:1">
          <mat-grid-tile><h2 (click)="toggleEditMode()">{{detailData?.name}}</h2></mat-grid-tile>
          <mat-grid-tile><h4 (click)="toggleEditMode()">{{detailData?.date | date : 'shortDate' }}</h4></mat-grid-tile>
          <mat-grid-tile colspan="2"><h4 (click)="toggleEditMode()">{{detailData?.phone }}</h4></mat-grid-tile>
          <mat-grid-tile colspan="2"><h4 (click)="toggleEditMode()">{{detailData?.email }}</h4></mat-grid-tile>
          <mat-grid-tile colspan="2"><h4 (click)="toggleEditMode()">{{detailData?.mailingAddress }}</h4></mat-grid-tile>
          <mat-grid-tile colspan="2"><h4 (click)="toggleEditMode()">{{detailData?.physicalAddress }}</h4></mat-grid-tile>
          <mat-grid-tile colspan="2"><h4 (click)="toggleEditMode()">{{detailData?.degree }}</h4></mat-grid-tile>
          <mat-grid-tile><mat-chip (click)="toggleEditMode()">{{detailData?.status}}</mat-chip></mat-grid-tile>
          <mat-grid-tile><mat-chip (click)="toggleEditMode()">{{detailData?.clearance}}</mat-chip></mat-grid-tile>
        </mat-grid-list>
      </mat-card>
    </section>

    <section *ngIf="editMode">
      <form class="form-container">

        <h3 class="mat-h3">Applicant</h3>
        <mat-divider></mat-divider>

        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput  placeholder="Applicant's Name" value="{{detailData?.name}}">
        </mat-form-field>
        <mat-button-toggle-group #group="matButtonToggleGroup">
          <mat-button-toggle *ngFor="let EmpType of lookupLists?.InternalEmployeeType" value="EmpType.id" [checked]="EmpType.id === detailData?.employeeTypeId">
            {{ EmpType.short }}
          </mat-button-toggle>
        </mat-button-toggle-group>

        <h3 class="mat-h3">Contact Information</h3>
        <mat-divider></mat-divider>

        <mat-form-field>
          <mat-label>Email</mat-label>
          <input matInput type="email" placeholder="Applicant's Email" value="{{detailData?.email}}">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Phone</mat-label>
          <input matInput type="tel" placeholder="Applicant's Phone Number" value="{{detailData?.phone}}">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Mailing Address</mat-label>
          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" cdkAutosizeMaxRows="4" placeholder="Applicant's Mailing Address" [value]="detailData?.mailingAddress"></textarea>
        </mat-form-field>
        <mat-checkbox class="mat-form-field-wrapper" #sameAsMailing [checked]="detailData?.mailingAddress === detailData?.physicalAddress">Physical Address same as Mailing Address</mat-checkbox>
        <mat-form-field *ngIf="!sameAsMailing.checked">
          <mat-label>Physical Address</mat-label>
          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" cdkAutosizeMaxRows="4" placeholder="Applicant's Physical Address" [value]="detailData?.physicalAddress"></textarea>
        </mat-form-field>

        <h3 class="mat-h3">Job Applied For</h3>
        <mat-divider></mat-divider>


        <h3 class="mat-h3">Security Clearance</h3>
        <mat-divider></mat-divider>


        <h3 class="mat-h3">Education</h3>
        <mat-divider></mat-divider>

        <mat-form-field>
          <mat-form-field>
            <mat-select placeholder="{{detailData?.degree}}">
              <mat-option *ngFor="let degree of lookupLists?.Degree" value="EmpType.id" selected="EmpType.id === person.employeeTypeId">
                {{ degree.long }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-form-field>
        <mat-form-field>
          <mat-form-field>
            <mat-select placeholder="{{detailData?.status}}">
              <mat-option *ngFor="let EmpType of lookupLists?.InternalEmployeeType" value="EmpType.id" selected="EmpType.id === person.employeeTypeId">
                {{ EmpType.long }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-form-field>
        <mat-form-field>
          <mat-form-field>
            <mat-select placeholder="{{detailData?.clearance}}">
              <mat-option *ngFor="let clearance of lookupLists?.SecurityClearance" value="clearance.id" selected="clearance.id === person.clearanceId">
                {{ clearance.long }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-form-field>
      </form>
    </section>
  </div>
  <div class="panel">
    <mat-menu #resumeMenu="matMenu" xPosition="before">
      <button mat-menu-item >
        <mat-icon>cloud_download</mat-icon>
        <span>Download</span>
      </button>
    </mat-menu>

    <button class="panel-menu" mat-icon-button [matMenuTriggerFor]="resumeMenu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <div class="resume-upload" *ngIf="!dataExists">
      <div>
        <input type="file" accept=".pdf, .doc, .docx, .txt" (change)="onFileChange($event)">
      </div>
    </div>

    <pdf-viewer [src]="detailData?.pdfSrc"
                [render-text]="true"
                [original-size]="false"
                [autoresize]="true">
    </pdf-viewer>
  </div>
</div>
<div mat-dialog-actions *ngIf="editMode">
  <button mat-button>Save</button>
  <button mat-button cdkFocusInitial (click)="toggleEditMode()">Cancel</button>
</div>
